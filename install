#!/bin/bash

set -eux -o pipefail

# Install packages.
sudo apt-get install -y \
	build-essential \
	terminator

# Compile bgrep.
gcc -O2 -x c -o ./bin/bgrep ./lib/bgrep/bgrep.c; chmod +x ./bin/bgrep

# Set up ~/bin.
mkdir -p ~/bin
cp -n ./bin/* ~/bin/

# Make a code directory.
mkdir -p ~/code

# Set up configuration files.
cp ./.bashrc ~/.bashrc
cp -n ./.exports ~/.exports
mkdir -p ~/.config/terminator
cp -n ./.config/terminator/config ~/.config/terminator/config
mkdir -p ~/.config/sublime-text-3/
cp -r .config/sublime-text-3/* ~/.config/sublime-text-3/

# Set up terminal settings.
PROFILE_PATH=/org/gnome/terminal/legacy/profiles:/
PROFILE=$(dconf list $PROFILE_PATH)
dconf write ${PROFILE_PATH}${PROFILE}scrollback-unlimited true
