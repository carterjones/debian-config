#!/bin/bash

set -eux -o pipefail

filespath='./files/shared/'

if [[ $(uname) == Linux ]]; then
	# Note: this assumes Ubuntu Linux.

	# Set the files path for running Linux scripts.
	export filespath='./files/linux'
	export scriptspath='./scripts/linux'

	# Determine if this is a GUI environment. If it is, install GUI-related
	# customizations. Otherwise, skip installation of those tools.
	readonly CONFIGURE_GUI_TOOLS_AND_SETTINGS=$([[ -n "${DISPLAY+x}" ]]; echo $?)

	# Determine if gnome-desktop is installed. If it is, install gnome-specific customizations.
	readonly GNOME_INSTALLED=$(apt list --installed 2>/dev/null | grep gnome-desktop; echo $?)

	# Make globally applicable customizations.
	bash ${scriptspath}/install-base-debs.sh
	bash ${scriptspath}/create-user-dirs.sh
	bash ${scriptspath}/create-dot-files.sh
	bash ${scriptspath}/install-bgrep.sh
	bash ${scriptspath}/install-go.sh
	bash ${scriptspath}/install-nmap.sh
	bash ${scriptspath}/install-whois.sh

	# Make customizations specific to GUI environments.
	if [[ CONFIGURE_GUI_TOOLS_AND_SETTINGS -eq 0 ]]; then
		bash ${scriptspath}/install-terminator.sh
		bash ${scriptspath}/install-yakuake.sh
		bash ${scriptspath}/install-sublime.sh
		bash ${scriptspath}/install-chrome.sh
		bash ${scriptspath}/install-slack.sh

		# Make customizations specific to Gnome environments.
		if [[ GNOME_INSTALLED ]]; then
			bash ${scriptspath}/configure-gnome.sh
			bash ${scriptspath}/install-compizconfig-settings-manager.sh
		fi
	fi
elif [[ $(uname) == Darwin ]]; then
	echo
fi

# Unset exported variables.
unset filespath
unset scriptspath
